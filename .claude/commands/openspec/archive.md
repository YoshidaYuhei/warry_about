---
name: "OpenSpec: アーカイブ"
description: デプロイされたOpenSpec変更をアーカイブし、スペックを更新します。
category: OpenSpec
tags: [openspec, archive]
---
<!-- OPENSPEC:START -->
**ガードレール**
- まずシンプルで最小限の実装を優先し、リクエストされた場合または明らかに必要な場合にのみ複雑さを追加する。
- 変更はリクエストされた結果に厳密にスコープを絞る。
- 追加のOpenSpec規約や明確化が必要な場合は`openspec/AGENTS.md`（`openspec/`ディレクトリ内にあります—見つからない場合は`ls openspec`または`openspec update`を実行）を参照する。

**手順**
1. アーカイブする変更IDを特定する:
   - このプロンプトに特定の変更ID（例：スラッシュコマンド引数によって入力された`<ChangeId>`ブロック内）が既に含まれている場合、空白をトリムした値を使用する。
   - 会話が変更を曖昧に参照している場合（例：タイトルや概要）、`openspec list`を実行して候補となるIDを表示し、関連する候補を共有して、ユーザーがどれを意図しているか確認する。
   - それ以外の場合、会話を確認し、`openspec list`を実行し、どの変更をアーカイブするかユーザーに尋ねる；続行する前に確認された変更IDを待つ。
   - それでも単一の変更IDを特定できない場合は、停止してまだ何もアーカイブできないことをユーザーに伝える。
2. `openspec list`（または`openspec show <id>`）を実行して変更IDを検証し、変更が見つからない、既にアーカイブされている、またはアーカイブの準備ができていない場合は停止する。
3. `openspec archive <id> --yes`を実行して、CLIがプロンプトなしで変更を移動しスペック更新を適用するようにする（ツーリングのみの作業には`--skip-specs`を使用）。
4. コマンド出力を確認して、ターゲットスペックが更新され、変更が`changes/archive/`に配置されたことを確認する。
5. `openspec validate --strict`で検証し、何かおかしい場合は`openspec show <id>`で確認する。

**参考**
- アーカイブ前に変更IDを確認するには`openspec list`を使用する。
- `openspec list --specs`で更新されたスペックを確認し、引き継ぐ前に検証の問題に対処する。
<!-- OPENSPEC:END -->
